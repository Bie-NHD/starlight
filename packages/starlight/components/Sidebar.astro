---
import type { Props } from '../props';

import MobileMenuFooter from 'virtual:starlight/components/MobileMenuFooter';
import { getSidebarHash } from '../utils/navigation';
import SidebarSublist from './SidebarSublist.astro';
import SidebarRestore from './SidebarRestoreScript?sl-inline-minified';

const { sidebar } = Astro.props;
const hash = getSidebarHash(sidebar);
---

<sl-sidebar-state-persist data-hash={hash}>
	<SidebarSublist sublist={sidebar} />
</sl-sidebar-state-persist>
<div class="md:sl-hidden">
	<MobileMenuFooter {...Astro.props} />
</div>

<script is:inline set:html={SidebarRestore} />
<style>
	sl-sidebar-state-persist {
		display: contents;
	}
</style>
